namespace MicroserviceGen.CLI.Controllers.Masstransit.Scripts;

public class NLayerScripts
{
    public const string Rabbit = "echo \"Setting up for RabbitMQ with Masstransit\"\ncd _PasteNameHere_.Web\ndotnet add package MassTransit\ndotnet add package MassTransit.RabbitMQ\n\nsed -i '1s|^|using MassTransit;\\n|' Program.cs\nsed -i \"/var builder = WebApplication.CreateBuilder(args);/a \\\\\nbuilder.Services.AddMassTransit(x =>\\\\\n{\\\\\n    x.UsingRabbitMq((context, cfg) =>\\\\\n    {\\\\\n        cfg.Host(builder.Configuration[\\\"RabbitMQSettings:Host\\\"]!, \\\"/\\\", host =>\\\\\n        {\\\\\n            host.Username(builder.Configuration[\\\"RabbitMQSettings:Username\\\"]!);\\\\\n            host.Password(builder.Configuration[\\\"RabbitMQSettings:Password\\\"]!);\\\\\n        });\\\\\n        cfg.ConfigureEndpoints(context);\\\\\n    });\\\\\n});\" Program.cs\n\nAPPSETTINGS=\"appsettings.json\"\nAPPSETTINGS_DEV=\"appsettings.Development.json\"\n# Note the different connection string format for PostgreSQL\nNEW_CONNECTION=\"\\\"RabbitMQSettings\\\": {\\n    \\\"Username\\\": \\\"guest\\\",\\n  \\\"Password\\\":\\\"guest\\\",\\n    \\\"Host\\\":\\\"localhost\\\"\\n  },\"\nsed -i \"/^{/a $NEW_CONNECTION\" \"$APPSETTINGS\"\nsed -i \"/^{/a $NEW_CONNECTION\" \"$APPSETTINGS_DEV\"\ncd ..\n";
    public const string Kafka = "echo \"Setting up for Kafka with Masstransit\"\ncd _PasteNameHere_.Web\ndotnet add package MassTransit --version 8.0.0\ndotnet add package MassTransit.Kafka --version 8.0.0\n\nsed -i '1s|^|using MassTransit;\\n|' Program.cs\nsed -i \"/var builder = WebApplication.CreateBuilder(args);/a \\\\\nbuilder.Services.AddMassTransit(x =>\\\\\n{\\\\\n    x.AddRider(rider =>\\\\\n    {\\\\\n        rider.UsingKafka((context, k) =>\\\\\n        {\\\\\n            k.Host(builder.Configuration[\\\"KafkaSettings:HostAddress\\\"]!);\\\\\n        });\\\\\n    });\\\\\n});\" Program.cs\n\nAPPSETTINGS=\"appsettings.json\"\nAPPSETTINGS_DEV=\"appsettings.Development.json\"\n# Note the different connection string format for PostgreSQL\nNEW_CONNECTION=\"\\\"KafkaSettings\\\": {\\n    \\\"HostAddress\\\": \\\"localhost:9092\\\"\\n  },\"\nsed -i \"/^{/a $NEW_CONNECTION\" \"$APPSETTINGS\"\nsed -i \"/^{/a $NEW_CONNECTION\" \"$APPSETTINGS_DEV\"\ncd ..\n";
}